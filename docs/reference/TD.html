<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>S3 class TD — TD • statgenSTA</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="S3 class TD — TD" />
<meta property="og:description" content="createTD
Function for creating objects of S3 class TD (Trial Data). The function
converts a data.frame to an object of class TD in the following steps:
Check input data
Rename columns to default column names - default column names:
genotype, trial, loc, year, repId, subBlock, rowCoord, colCoord, rowId,
colId, checkId
Convert column types to default column types - rowCoord and colCoord
are converted to numeric columns, all other renamed columns to factor
columns. Columns other than the default columns, e.g. traits or other
covariates will be included in the output unchanged.
Split input data by trial - each trial in the input data will become
a list item in the output.
Add meta data - the trial meta data are added as attributes to the
different output items. The function parameters starting with &quot;tr&quot; provide
the meta data. Their values will be recycled if needed, so by setting a
single &quot;trDesign&quot;, all trials will get the same design. For trLat, trLong,
trDesign and trDate a column in data that contains the information
can be specified as well. The meta data can be changed later on using
getMeta and setMeta
addTD
Function for adding extra trial data to an existing object of class TD. The
data for the new trials will be added after the data for existing trials. It
is possible to add data for an already existing trial, but this will cause
multiple items in the output with identical names, which might cause problems
later on in the analysis. Therefore a warning will be issued in this
case.
dropTD
Function for removing data for selected trials from an existing object of
class TD.
summary.TD and plot.TD methods are available." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">statgenSTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-seedling"></span>
     
    other packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://github.com/Biometris/statgenGWAS/index.html">statgenGWAS</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://biometris.github.io/statgenSTA/index.html">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>S3 class TD</h1>
    <small class="dont-index">Source: <a href='https://github.com/Biometris/statgenSTA/blob/master/R/createTD.R'><code>R/createTD.R</code></a></small>
    <div class="hidden name"><code>TD.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>createTD</code><br />
Function for creating objects of S3 class TD (Trial Data). The function
converts a data.frame to an object of class TD in the following steps:</p><ul>
<li><p>Check input data</p></li>
<li><p>Rename columns to default column names - default column names:
genotype, trial, loc, year, repId, subBlock, rowCoord, colCoord, rowId,
colId, checkId</p></li>
<li><p>Convert column types to default column types - rowCoord and colCoord
are converted to numeric columns, all other renamed columns to factor
columns. Columns other than the default columns, e.g. traits or other
covariates will be included in the output unchanged.</p></li>
<li><p>Split input data by trial - each trial in the input data will become
a list item in the output.</p></li>
<li><p>Add meta data - the trial meta data are added as attributes to the
different output items. The function parameters starting with "tr" provide
the meta data. Their values will be recycled if needed, so by setting a
single "trDesign", all trials will get the same design. For trLat, trLong,
trDesign and trDate a column in <code>data</code> that contains the information
can be specified as well. The meta data can be changed later on using
<code>getMeta</code> and <code>setMeta</code></p></li>
</ul><p><code>addTD</code><br />
Function for adding extra trial data to an existing object of class TD. The
data for the new trials will be added after the data for existing trials. It
is possible to add data for an already existing trial, but this will cause
multiple items in the output with identical names, which might cause problems
later on in the analysis. Therefore a warning will be issued in this
case.<br /><br />
<code>dropTD</code><br />
Function for removing data for selected trials from an existing object of
class TD.<br /><br />
<code><a href='summary.TD.html'>summary.TD</a></code> and <code><a href='plot.TD.html'>plot.TD</a></code> methods are available.</p>
    </div>

    <pre class="usage"><span class='fu'>createTD</span>(
  <span class='no'>data</span>,
  <span class='kw'>genotype</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trial</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>loc</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>year</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>repId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>subBlock</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>plotId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>rowCoord</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>colCoord</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>rowId</span> <span class='kw'>=</span> <span class='no'>rowCoord</span>,
  <span class='kw'>colId</span> <span class='kw'>=</span> <span class='no'>colCoord</span>,
  <span class='kw'>checkId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trLocation</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trDate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trDesign</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trLat</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trLong</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trPlWidth</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trPlLength</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)

<span class='fu'>addTD</span>(
  <span class='no'>TD</span>,
  <span class='no'>data</span>,
  <span class='kw'>genotype</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trial</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>loc</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>year</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>repId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>subBlock</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>plotId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>rowCoord</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>colCoord</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>rowId</span> <span class='kw'>=</span> <span class='no'>rowCoord</span>,
  <span class='kw'>colId</span> <span class='kw'>=</span> <span class='no'>colCoord</span>,
  <span class='kw'>checkId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trLocation</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trDate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trDesign</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trLat</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trLong</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trPlWidth</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trPlLength</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)

<span class='fu'>dropTD</span>(<span class='no'>TD</span>, <span class='no'>rmTrials</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data.frame containing trial data with at least a column for
genotype. The data.frame should be in a wide format, i.e. all available
phenotypic data should be in a separate column within the data.frame.</p></td>
    </tr>
    <tr>
      <th>genotype</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains genotypes.</p></td>
    </tr>
    <tr>
      <th>trial</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains trials.</p></td>
    </tr>
    <tr>
      <th>loc</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains trial locations.</p></td>
    </tr>
    <tr>
      <th>year</th>
      <td><p>An optional character string indicating the column in <code>data</code>
that contains years.</p></td>
    </tr>
    <tr>
      <th>repId</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains replicates.</p></td>
    </tr>
    <tr>
      <th>subBlock</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains sub blocks.</p></td>
    </tr>
    <tr>
      <th>plotId</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains plots. This column will be combined with trial
to a single output factor.</p></td>
    </tr>
    <tr>
      <th>rowCoord</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains the row coordinates.</p></td>
    </tr>
    <tr>
      <th>colCoord</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains the column coordinates.</p></td>
    </tr>
    <tr>
      <th>rowId</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains field rows. If not supplied, this is assumed to
be the same as rowCoord.</p></td>
    </tr>
    <tr>
      <th>colId</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains field columns. If not supplied, this is assumed to
be the same as colCoord.</p></td>
    </tr>
    <tr>
      <th>checkId</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains the check IDs.</p></td>
    </tr>
    <tr>
      <th>trLocation</th>
      <td><p>An optional character vector indicating the locations of
the trials. This will be used as default names when creating plots and
summaries. If no locations are provided, first the column loc is considered.
If this contains one unique value for a trial this is used as trLocation.
Otherwise the trial name is used.</p></td>
    </tr>
    <tr>
      <th>trDate</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains the date of the trial or a date vector indicating
the dates of the trials.</p></td>
    </tr>
    <tr>
      <th>trDesign</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains the design of the trial or a character vector
indicating the designs of the trials. Either "none" (no (known) design), "
ibd" (incomplete-block design), "res.ibd" (resolvable incomplete-block
design), "rcbd" (randomized complete block design), "rowcol" (row-column
design) or "res.rowcol" (resolvable row-column design).</p></td>
    </tr>
    <tr>
      <th>trLat</th>
      <td><p>An optional character string indicating the column in <code>data</code>
that contains the latitude of the trial or a numerical vector indicating the
latitudes of the trials on a scale of -90 to 90.</p></td>
    </tr>
    <tr>
      <th>trLong</th>
      <td><p>An optional character string indicating the column in
<code>data</code> that contains the latitude of the trial or a numerical vector
indicating the longitudes of the trials on a scale of -180 to 180.</p></td>
    </tr>
    <tr>
      <th>trPlWidth</th>
      <td><p>An optional positive numerical vector indicating the
widths of the plots.</p></td>
    </tr>
    <tr>
      <th>trPlLength</th>
      <td><p>An optional positive numerical vector indicating the
lengths of the plots.</p></td>
    </tr>
    <tr>
      <th>TD</th>
      <td><p>An object of class TD which should be modified.</p></td>
    </tr>
    <tr>
      <th>rmTrials</th>
      <td><p>A character vector of trials that should be removed.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class TD, a list of data.frames with renamed columns
and an attribute <code>renamedCols</code> containing an overview of renamed
columns. For each unique value of trial, the output has a data.frame in
the list with the same name as the trial. These data.frames have attributes
containing the metadata for the corresponding trial. If there is no column
for trial, the list will contain one item named after the input data.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other functions for TD objects: 
<code><a href='getMeta.html'>getMeta</a>()</code>,
<code><a href='plot.TD.html'>plot.TD</a>()</code>,
<code><a href='summary.TD.html'>summary.TD</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Create a data.frame to be converted to TD object.</span>
<span class='co'>## The data consists of genotype, trial, row and column information and</span>
<span class='co'>## two traits, yield and flowering time.</span>
<span class='no'>datT1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>geno</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='st'>"G"</span>, <span class='fl'>1</span>:<span class='fl'>10</span>), <span class='kw'>tr</span> <span class='kw'>=</span> <span class='st'>"T1"</span>,
                    <span class='kw'>row</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>2</span>), <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>times</span> <span class='kw'>=</span> <span class='fl'>5</span>),
                    <span class='kw'>yield</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>flowering</span> <span class='kw'>=</span> <span class='fl'>3</span>:<span class='fl'>12</span>)

<span class='co'>## Convert data.frame to TD object.</span>
<span class='no'>TDT1</span> <span class='kw'>&lt;-</span> <span class='fu'>createTD</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>datT1</span>, <span class='kw'>genotype</span> <span class='kw'>=</span> <span class='st'>"geno"</span>, <span class='kw'>trial</span> <span class='kw'>=</span> <span class='st'>"tr"</span>,
                 <span class='kw'>rowCoord</span> <span class='kw'>=</span> <span class='st'>"row"</span>, <span class='kw'>colCoord</span> <span class='kw'>=</span> <span class='st'>"col"</span>)

<span class='co'>## Create a second data.frame similar to the first with data for a second trial.</span>
<span class='no'>datT2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>geno</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='st'>"G"</span>, <span class='fl'>1</span>:<span class='fl'>10</span>), <span class='kw'>tr</span> <span class='kw'>=</span> <span class='st'>"T2"</span>,
                    <span class='kw'>row</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>5</span>), <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>times</span> <span class='kw'>=</span> <span class='fl'>2</span>),
                    <span class='kw'>yield</span> <span class='kw'>=</span> <span class='fl'>10</span>:<span class='fl'>1</span>, <span class='kw'>flowering</span> <span class='kw'>=</span> <span class='fl'>12</span>:<span class='fl'>3</span>)

<span class='co'>## Add this data to the TD object created above.</span>
<span class='no'>TDTot</span> <span class='kw'>&lt;-</span> <span class='fu'>addTD</span>(<span class='kw'>TD</span> <span class='kw'>=</span> <span class='no'>TDT1</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>datT2</span>, <span class='kw'>genotype</span> <span class='kw'>=</span> <span class='st'>"geno"</span>, <span class='kw'>trial</span> <span class='kw'>=</span> <span class='st'>"tr"</span>,
               <span class='kw'>rowCoord</span> <span class='kw'>=</span> <span class='st'>"row"</span>, <span class='kw'>colCoord</span> <span class='kw'>=</span> <span class='st'>"col"</span>)

<span class='co'>## Drop the data for the first trial from the object.</span>
<span class='no'>TDT2</span> <span class='kw'>&lt;-</span> <span class='fu'>dropTD</span>(<span class='kw'>TD</span> <span class='kw'>=</span> <span class='no'>TDTot</span>, <span class='kw'>rmTrials</span> <span class='kw'>=</span> <span class='st'>"T1"</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Bart-Jan van Rossum.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


